---
sidebar_position: 1
---

# Введение в Xec: Универсальная оболочка для TypeScript

Добро пожаловать в **Xec** - универсальную оболочку, которая позволяет писать один раз и выполнять где угодно. Xec предоставляет единый, элегантный TypeScript интерфейс для выполнения команд на вашем локальном компьютере, удаленных серверах через SSH, в Docker контейнерах или Kubernetes подах.

## Один интерфейс. Любая среда.

Xec - это не просто еще одна библиотека для выполнения процессов - это фундаментальный пересмотр того, как мы взаимодействуем с выполнением команд в экосистеме TypeScript:

- **Плавный и знакомый API** - Наслаждайтесь синтаксисом в стиле `zx` с шаблонными литералами. Больше никаких неудобных вызовов `spawn` или `exec`
- **Безупречное переключение контекста** - Переходите с локального компьютера в SSH сессию или Docker контейнер одним вызовом метода
- **Надежный и типобезопасный** - Построен на TypeScript с моделью обработки ошибок на основе `Result` для надежной, поддерживаемой логики выполнения
- **Все включено** - Готов к использованию с адаптерами для локальной среды, SSH, Docker и Kubernetes из коробки
- **Разработан для сложного скриптинга** - Полная мощь TypeScript с неизменяемой конфигурацией и интерактивными подсказками

## Основные возможности

### Выполнение команд с шаблонными литералами
```typescript
import { $ } from '@xec-sh/core';

// Выполняйте команды используя шаблонные литералы
await $`echo "Hello, World!"`;

// Переменные автоматически экранируются для безопасности
const filename = "file with spaces.txt";
await $`touch ${filename}`;  // Безопасное выполнение
```

### Адаптеры выполнения

Xec предоставляет адаптеры, которые позволяют выполнять команды в разных средах используя тот же API:

- **Локальный адаптер** - Выполнение команд на локальном компьютере
- **SSH адаптер** - Выполнение команд на удаленных серверах через SSH
- **Docker адаптер** - Выполнение команд внутри Docker контейнеров
- **Kubernetes адаптер** - Выполнение команд в Kubernetes подах
- **Удаленный Docker адаптер** - Выполнение Docker команд на удаленных хостах

### Обработка результатов команд
```typescript
// Каждая команда возвращает детальные результаты выполнения
const result = await $`ls -la`;
console.log(result.stdout);      // Стандартный вывод
console.log(result.stderr);      // Стандартная ошибка
console.log(result.exitCode);    // Код выхода
console.log(result.isSuccess()); // Проверка успеха
```

### Управление средой
```typescript
// Изменение рабочей директории
const $tmp = $.cd('/tmp');

// Установка переменных окружения
const $env = $.env({ NODE_ENV: 'production' });

// Настройка оболочки
const $bash = $.shell('/bin/bash');

// Установка таймаута команды
const $timeout = $.timeout(5000);
```

### Продвинутые возможности

#### Параллельное выполнение
```typescript
import { parallel } from '@xec-sh/core';

// Выполнение нескольких команд одновременно
const results = await parallel([
  $`npm install`,
  $`npm run build`,
  $`npm test`
], { maxConcurrent: 2 });
```

#### Обработка ошибок
```typescript
// Не выбрасывать исключения при ненулевых кодах выхода
const result = await $`grep pattern file.txt`.nothrow();
if (!result.isSuccess()) {
  console.log('Pattern not found');
}

// Автоматические повторы
await $`curl http://api.example.com`.retry(3);
```

#### Потоковая обработка
```typescript
// Потоковый вывод команд в реальном времени
await $`tail -f /var/log/app.log`.stream();

// Обработка вывода построчно
await $`find . -name "*.js"`.pipe(async (line) => {
  console.log('Found:', line);
});
```

#### SSH туннели и проброс портов
```typescript
// Создание SSH туннеля
const ssh = $.ssh({ host: 'server.com', username: 'user' });
const tunnel = await ssh.tunnel({
  localPort: 3306,
  remoteHost: 'database.internal',
  remotePort: 3306
});

// Проброс портов Kubernetes
const k8s = $.k8s({ namespace: 'default' });
const pod = k8s.pod('web-app');
const forward = await pod.portForward(8080, 80);
```

#### Файловые операции
```typescript
// Передача файлов через SSH
await ssh.uploadFile('./local.txt', '/remote/path.txt');
await ssh.downloadFile('/remote/file.txt', './local-copy.txt');

// Копирование файлов в/из Kubernetes подов
await pod.copyTo('./config.json', '/app/config.json');
await pod.copyFrom('/app/logs/app.log', './app.log');
```

## Компоненты пакета

### @xec-sh/cli
Интерфейс командной строки, который предоставляет:
- Прямое выполнение команд: `xec "echo Hello"`
- Выполнение скриптов: `xec script.ts`
- Режим REPL для интерактивного использования
- Утилиты управления проектами

### @xec-sh/core
Основная библиотека, предоставляющая:
- Функцию `$` для выполнения команд
- Адаптеры выполнения для разных сред
- Утилитарные функции для параллельного выполнения, повторов и многого другого
- Систему событий для мониторинга выполнения
- Пул соединений и управление ресурсами

## Кому подходит Xec?

Xec идеален для:
- **Разработчиков**, которые хотят писать shell скрипты на TypeScript/JavaScript
- **DevOps инженеров**, которым нужны типобезопасные скрипты автоматизации
- **Системных администраторов**, которые хотят лучшей обработки ошибок и отладки
- **Любого**, кто предпочитает JavaScript/TypeScript традиционному shell скриптингу

## Следующие шаги

- Следуйте [Руководству по быстрому старту](/docs/getting-started/quick-start) для установки и начала использования Xec
- Изучите [Примеры](https://github.com/xec-sh/xec/tree/main/packages/core/examples) чтобы увидеть Xec в действии
- Прочитайте [Основную документацию](/docs/projects/core) для детального API справочника

Xec приносит мощь и гибкость современных языков программирования в shell скриптинг, сохраняя при этом простоту и прямолинейность выполнения команд.